apply plugin: 'java'
apply plugin: 'maven-publish'

group = 'com.micasino.gradlepack'
version = '2.1'

sourceCompatibility = 1.8 // java 8
targetCompatibility = 1.8

repositories {
  mavenCentral()
}

dependencies {
  implementation 'com.google.guava:guava:29.0-jre'
}

java {
	withSourcesJar()
	withJavadocJar()
}

publishing {
    publications {
        maven(MavenPublication) {
		from components.java
        }
    }

    repositories {
      maven {
        //https://mi-casino-git-lab.pdominguezb-lab.xyz/help/user/packages/maven_repository/index.md#create-maven-packages-with-gitlab-cicd
        url = uri('https://mi-casino-git-lab.pdominguezb-lab.xyz/api/v4/projects/2/packages/maven') // System.getenv("DEVOPS_REGISTRY_GITLAB_URL")

        credentials(HttpHeaderCredentials) {
                name = "Private-Token"
                value = gitlabDeployToken // the token is stored in ~/.gradle/gradle.properties
            }
            authentication {
                header(HttpHeaderAuthentication)
            }
    }	
	}
}

wrapper {
    gradleVersion = "7.3.3"
    distributionType = Wrapper.DistributionType.ALL
}
